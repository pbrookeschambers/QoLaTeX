\mode<presentation>

% \RequirePackage[scheme = twilight, light]{../QoColours/qocolours}

\RequirePackage{forarray}
\RequirePackage{xcolor}
\RequirePackage{keyval}
\RequirePackage{kvoptions}
\RequirePackage{tcolorbox}


% (*Now we define the default colour scheme if and only if a scheme has not already been loaded. This should avoid issues of loading order if both \texttt{qolistings} and \texttt{officecolours} packages are used.*)

% \DefineArrayVar%
% {twilight}%
% {@}%
% {,}%
% {ForegroundColour,BackgroundColour,Accent1,Accent2,Accent3,Accent4,Accent5,Accent6,Hyperlink,FollowedHyperlink}%
% {,}%
% {24213E, E9EAEF, E4BC50, 86C0C4, E68E3A, 949FDE, 89A049, CE5D45, 0000FF, 0000AA}
%
% \ForEach%
%   {,}%
%   {%
%     \providecolor{\thislevelitem}{HTML}{\csname twilight@\thislevelitem\endcsname}%
%     \colorlet{\thislevelitem_1}{\thislevelitem!50!black}
%     \colorlet{\thislevelitem_2}{\thislevelitem!75!black}
%     \colorlet{\thislevelitem_3}{\thislevelitem!60!white}
%     \colorlet{\thislevelitem_4}{\thislevelitem!40!white}
%     \colorlet{\thislevelitem_5}{\thislevelitem!20!white}
%   }
%   {ForegroundColour,Accent1,Accent2,Accent3,Accent4,Accent5,Accent6,Hyperlink,FollowedHyperlink}
%   \providecolor{BackgroundColour}{HTML}{\csname twilight@BackgroundColour\endcsname}%
%   \colorlet{BackgroundColour_5}{BackgroundColour!90!black}
%   \colorlet{BackgroundColour_4}{BackgroundColour!75!black}
%   \colorlet{BackgroundColour_3}{BackgroundColour!50!black}
%   \colorlet{BackgroundColour_2}{BackgroundColour!25!black}
%   \colorlet{BackgroundColour_1}{BackgroundColour!10!black}

% Create beamer theme:

\useinnertheme{rounded}
\useoutertheme{infolines}
\setbeamerfont{block title}{size=\large}
\setbeamertemplate{itemize item}[square] % or triangle, circle, ball...
\setbeamertemplate{itemize subitem}[square]
\setbeamertemplate{itemize subsubitem}[square]
\setbeamertemplate{enumerate item}[square] % or triangle, circle, ball...
\setbeamertemplate{enumerate subitem}[square]
\setbeamertemplate{enumerate subsubitem}[square]


% Setting Colours

\setbeamercolor{background canvas}{bg = BackgroundColour}
\setbeamercolor{normal text}{bg = BackgroundColour, fg = ForegroundColour}
\setbeamercolor{titlelike}{bg = Accent1_3, fg = ForegroundColour}
\setbeamercolor{palette primary}{bg = Accent2_2, fg = BackgroundColour}
\setbeamercolor{palette secondary}{bg = Accent2, fg = BackgroundColour}
\setbeamercolor{palette tertiary}{bg = Accent2_3, fg = ForegroundColour}
\setbeamercolor{palette quaternary}{bg = BackgroundColour_5, fg = Accent4}
\setbeamercolor{palette sidebar primary}{bg = ForegroundColour, fg = Accent3_4}
\setbeamercolor{palette sidebar secondary}{bg = Accent2_4, fg = ForegroundColour}
\setbeamercolor{palette sidebar tertiary}{bg = ForegroundColour, fg = Accent2_4}
\setbeamercolor{palette sidebar quaternary}{bg = ForegroundColour, fg = Accent4_4}
\setbeamercolor{itemize item}{fg = Accent2}
\setbeamercolor{itemize subitem}{fg = Accent2_3}
\setbeamercolor{itemize subsubitem}{fg = Accent2_4}
\setbeamercolor{enumerate item}{fg = Accent3}
\setbeamercolor{enumerate subitem}{fg = Accent3_3}
\setbeamercolor{enumerate subsubitem}{fg = Accent3_4}
\setbeamercolor{math text}{fg = Accent1}

\usefonttheme{serif}
\setbeamertemplate{navigation symbols}{}
\setbeamertemplate{caption}[numbered]

\AtBeginSection[]
{
    \begin{frame}<beamer>
        \frametitle{Section \thesection}
        \begin{tcolorbox}[
                colframe = Accent1,
                colback = Accent1_4,
                coltext = ForegroundColour
            ]
            \Huge\secname
        \end{tcolorbox}
    \end{frame}
}

\AtBeginSubsection[]
{
    \begin{frame}<beamer>
        \frametitle{Section \thesection.\thesubsection}
        \begin{tcolorbox}[
                colframe = Accent1,
                colback = Accent2_4,
                coltext = ForegroundColour,
                coltitle = ForegroundColour,
                colbacktitle = Accent1_4,
                title = {\Huge\secname},
                toptitle = 2.5mm,
                bottomtitle = 2.5mm
            ]
            {\Large\subsecname}
        \end{tcolorbox}
    \end{frame}
}

\AtBeginSubsubsection[]
{
  \begin{frame}<beamer>
    \frametitle{Section \thesection.\thesubsection.\thesubsubsection}
    \begin{tcolorbox}[
            colframe = Accent1,
            colback = Accent2_4,
            coltext = ForegroundColour,
            coltitle = ForegroundColour,
            colbacktitle = Accent1_4,
            title = {\Huge\secname},
            toptitle = 2.5mm,
            bottomtitle = 2.5mm
        ]
        {\Large\subsecname

        \quad\large\subsubsecname}
    \end{tcolorbox}
    % \begin{tcolorbox}[
    %         colframe = Accent1,
    %         colback = Accent1_4,
    %         coltext = ForegroundColour
    %     ]
    %     {\Huge\secname}
    %
    %     \begin{tcolorbox}[
    %             colframe = Accent2,
    %             colback = Accent2_4,
    %             coltext = ForegroundColour
    %         ]
    %         {\Large\subsecname}
    %
    %         \begin{tcolorbox}[
    %                 colframe = Accent3,
    %                 colback = Accent3_4,
    %                 coltext = ForegroundColour
    %             ]
    %             {\large\subsubsecname}
    %         \end{tcolorbox}
    %     \end{tcolorbox}
    % \end{tcolorbox}
  \end{frame}
}
